<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>角色管理-视图设定</title>
    <link rel="icon" type="image/x-icon" href="../favicon.ico" /> 
    <link rel="shortcut icon" type="image/x-icon" href="../favicon.ico" /> 
     <style>
		fieldset { padding:0; border:0; margin-top:3px; }
		.ui-dialog .ui-state-error { padding: .3em; }
		.validateTips { border: 1px solid transparent; }
		.ui-widget-header { border: 1px solid #aaaaaa; background: #cccccc url(../images/ui-bg_highlight-soft_75_cccccc_1x100.png) 50% 50% repeat-x; color: #222222; font-weight: bold; }
	</style>
	 <div th:fragment="styles">
	    <link href="../styles/monitor.css" type="text/css"  rel="stylesheet" />
	    <link href="../styles/layout.css" type="text/css"  rel="stylesheet" />
	    <link href="../styles/table.css" type="text/css"  rel="stylesheet" />
	    <link rel="stylesheet" href="../styles/themes/base/jquery.ui.all.css"/>
	    <link href="../styles/monitor-search.css" type="text/css"  rel="stylesheet" />
   
    </div>
   	<script type="text/javascript" src="../scripts/jquery-1.7.1.js"></script>
    <script type="text/javascript" src="../scripts/paging.js"></script>
	    <script src="../scripts/ui/jquery.ui.core.js"></script>
		<script src="../scripts/ui/jquery.ui.widget.js"></script>
		<script src="../scripts/ui/jquery.ui.mouse.js"></script>
		<script src="../scripts/ui/jquery.ui.button.js"></script>
		<script src="../scripts/ui/jquery.ui.draggable.js"></script>
		<script src="../scripts/ui/jquery.ui.position.js"></script>
		<script src="../scripts/ui/jquery.ui.resizable.js"></script>
		<script src="../scripts/ui/jquery.ui.dialog.js"></script>
		<script src="../scripts/ui/jquery.ui.effect.js"></script>
    <div th:fragment="scripts">
		<script src="../scripts/sysmgt/viewSet.js" type="text/javascript"></script>
   </div>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
</head>
<body>
	<div th:fragment="content" style="overflow-y:auto;height:490px;margin: 5px; padding: 2px; border: 1px solid #aacbee; background: #f8f8f8; min-width: 1020px;">
		<form id="viewSetForm" name="viewSetForm" method="post" action="../role/setRoleView.html" th:object="${viewSearchCondition}">
			<input type="hidden" id="roleId" name="roleId" th:value="${role.roleId}"/>
			<input type="reset" id="resetBtnH" style="display:none;"/>
			 <input type="hidden" name="currentPage" value="1" th:field="*{currentPage}"/>
            <input type="hidden" name="totalPage"   value="5" th:field="*{totalPage}"/>
            <input type="hidden" name="jumpToPage" id="jumpToPage"  value="" />
            <input type="hidden" name="backMsg" id="backMsg" th:value="${backMsg}" />
            <input type="hidden" name="flag" id="flag" th:value="${flag}" />
			<table cellpadding="0" cellspacing="0" border="0" width="100%">
				<tr>
					<td class="Table_title"> <img src="../images/icon_01.gif" /> 角色[<span th:text="${role.roleName}"></span>]已关联的视图列表</td>
				</tr>
			</table>
           	<table class="Table_s">
                <tr>
                     <td class="label">视图名称</td>
                     <td>
                        <input type="text" name="viewName" id="viewName" th:field="*{viewName}"/>
                     </td>
                     <td class="label">视图类型</td>
                     <td>
                         <select id="viewType" name="viewType" class="selected01" style="width:100px;" th:field="*{viewType}">
							<option value="">请选择...</option>
							<option th:each="item : ${viewTypeList}" th:text="${item.viewTypeName}" th:value="${item.viewTypeCode}"></option>
					     </select>						
					 </td>
                     <td class="label">术语名称</td>
                     <td>
						<input type="text" name="dictName" id="dictName" th:field="*{dictName}"/>
                     </td>
					 <td style="width: 10px;"></td>
                     <td>
						<button  id="searchBtn" name='searchBtn' type="button" style="width: 85px;height:25px;cursor:pointer;" class="btn01">
							<img src="../images/btn/search.gif" style="vertical-align: middle;"/>&nbsp;搜索
						</button>
					</td>
					<td>
						<button  id="cleanBtn" name='cleanBtn' type="button" style="width: 85px;height:25px;cursor:pointer;" class="btn01">
							<img src="../images/btn/clean.gif" style="vertical-align: middle;"/>&nbsp;清空
						</button>
					</td>
                  </tr>
                  <tr style="height:1px;">
                      <td colspan="8"></td>
                  </tr>
              </table>
            </form>    
	                <hr/>
                    <div id="dataTable" style="padding-top: 5px; border: 0px solid #aacbee;">
    				<div align="left">
				       	<p style="height:3px;"></p>
    				    <table>
    				      <tbody>
    				        <tr>
    				         <td align="left">		    					    				 
								<button th:if="${flag eq 'returnRole'}" id="addBtn" type="button" style="overflow:visible;width:auto;height:25px;"  class="btn01">
		    					<img src="../images/btn/add.gif" style="vertical-align: middle;" />新增
		    					</button>
		    					<button th:if="${flag eq 'returnRole'}" id="deleteBtn" type="button" style="overflow:visible;width:auto;height:25px;"  class="btn01">
		    					<img src="../images/btn/delete.gif" style="vertical-align: middle;" />删除
		    					</button>
		    					<button id="returnBtn" type="button" style="overflow:visible;width:auto;height:25px;"  class="btn01">
			    					<img src="../images/btn/back.gif" style="vertical-align: middle;" />返回
			    				</button>
		    					</td>
		    				<td style="width: 100px;"></td>		    	                        
						    </tr>
						  </tbody>
						</table>
    				</div>
    				<p style="height:5px;"></p>
    				<table Id="viewTable" style="width: 100%; margin-top: 1px;" border="1px" cellspacing="0" cellpadding="1" class="Table_01">
    				<thead>
					<tr>
						<th style="width:55px;"><input align="center" type="checkbox" id="parentBox" name="parentBox" onclick="javascript:checkParent();"/></th>
						<th style="width:55px;" align="center">序号</th>
						<th style="width:150px;">视图名称</th>
						<th style="width:150px;">视图类型</th>
						<th style="width:150px;">术语名称</th>
						<th style="width:150px;">对应表</th>
						<th style="width:60px;">字段操作</th>
					</tr>
				</thead>
				<tbody class="tbody">
					<tr style="cursor: pointer;" th:each="item : ${viewList}" >
						<td align="center" th:id="${item.viewId} "><input type="checkbox" id="childrenBox" name="childrenBox" onclick="javascript:checkChildren();" th:id="${item.viewId}"/></td>					
						<td th:text="${#ids.seq('')}" align="center">1</td>
						<td th:text="${item.viewName}"></td>
						<td th:text="${item.viewTypeCN}"></td>
						<td th:text="${item.dictName}"></td>
						<td th:text="${item.tableName}"></td>
						<td align="center">
							<a href="javascript:void(0);" th:onclick="'javascript:viewShow(\'' + ${item.viewId} + '\',\'' + ${item.viewType} + '\',\'' + ${item.viewName} + '\',\'' + ${item.dictName} + '\',\'' + ${item.dictId} + '\',\'' + ${item.addFlg} + '\',\'' + ${item.deleteFlg} + '\',\'' + ${item.approveFlg} + '\',\'' + ${item.releaseFlg} + '\');'" style="color:blue;text-decoration:underline; " >查看</a>
						</td>
					</tr>
				  </tbody>		
				  <tfoot>
					<tr th:unless="${#lists.isEmpty(viewList)}" class="datatable-paging">
		                 <td colspan="4" class="datatable-paging-info">
		                     <span class="datatable-paging-count">第<span th:text="${roleSearchCondition.currentPage}">1</span>页/共<span th:text="${roleSearchCondition.totalPage}">550</span>页</span>
		                     <span class="datatable-paging-total">总共<span th:text="${roleSearchCondition.totalSize}">5500</span>条数据</span>
		                 </td>
		                 <td colspan="3" class="datatable-paging-page">
		                     <span class="datatable-paging-first" th:style="${roleSearchCondition.currentPage == 1 ? 'display: none;' : ''}" onclick="firstPage(document.viewSetForm);">首页</span>
		                     <span class="datatable-paging-previous" th:style="${roleSearchCondition.currentPage == 1 ? 'display: none;' : ''}" onclick="prevPage(document.viewSetForm);">上一页</span>
		                     <span class="datatable-paging-next" th:style="${roleSearchCondition.currentPage == roleSearchCondition.totalPage ? 'display: none;' : ''}" onclick="nextPage(document.viewSetForm);">下一页</span>
		                     <span class="datatable-paging-last" th:style="${roleSearchCondition.currentPage == roleSearchCondition.totalPage ? 'display: none;' : ''}" onclick="lastPage(document.viewSetForm);">尾页</span>
		                     <span class="datatable-paging-jump" th:style="${roleSearchCondition.totalPage == 1 ? 'display: none;' : ''}">
		                         <span>跳转到：</span>
		                         <input type="text" class="datatable-paging-jump-input" id="jumpToInput" />
		                         <span class="datatable-paging-jump-go" onclick="jumpToPage(document.viewSetForm, document.getElementById('jumpToInput'));"></span>
		                     </span>
		                 </td>
	                </tr>
                    <tr th:if="${#lists.isEmpty(viewList)}" class="datatable-paging">
	                    <td colspan="7" class="datatable-paging-info">
	                        <span>没有查询结果，请修改检索条件重新检索。</span>
	                    </td>
	                </tr>
				</tfoot>
    			</table>
		<div id="dialog-form"  title="角色增加视图列表" style="margin: 5px; padding: 1px;  solid :#aacbee; background: #f8f8f8;overflow:hidden" >
			<iframe id="dataIframe" width="950px" height="420px;" frameborder="0" scrolling="no" src=""></iframe>
		</div>
		<div>
			<div align="center" id="dialog-viewShow" 
				style="margin: 5px; padding: 1px; solid: #aacbee; background: #f8f8f8;overflow:hidden">
				<iframe id="viewIframe" width="700px" height="410px;" frameborder="0" scrolling="No" src=""></iframe>
			</div>
	    </div>	
	  </div>
	</div>
</body>
</html>
